<%
  box = EphemeraBox.find(params[:parent_id]) if params[:parent_id]
  authority = AuthorityFinder.for(property: "#{f.object.model_name}.#{key}", project: box.ephemera_project.first) if box.ephemera_project.first
%>
<% if authority %>
  <% options = Hyrax::QaSelectService.new(authority.subauthority_name) %>
  <%= f.input key,
    collection: options.select_active_options,
    include_blank: true,
    input_html: {
      class: 'form-control',
      multiple: f.object.multiple?(key),
      data: {
        live_search: true
      }
    } %>
<% else %>
  <%= render "records/edit_fields/default", f: f, key: key%>
<% end %>
